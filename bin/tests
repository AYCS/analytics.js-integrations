#!/usr/bin/env node

/**
 * Module dependencies.
 */

var fs = require('fs');
var write = fs.writeFileSync;
var readdir = fs.readdirSync;

/**
 * Get all slugs
 */

var slugs = readdir(__dirname + '/../lib');

/**
 * Filter
 */

if (process.env.integration) {
  slugs = slugs.filter(function(slug){ return slug == process.env.integration; });
}

/**
 * Build requires for tests
 */

var requires = slugs.map(function(slug, i){
  return "require('../lib/" +  slug + "/test.js');"
});

/**
 * Write `test/tests.js`
 */

var js = requires.join('\n') + '\n';
write(__dirname + '/../test/tests.js', js);
